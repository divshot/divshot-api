!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("__browserify_process"),d=a("./helpers/defaults"),e=a("narrator"),f=a("./user"),g=a("./apps"),h=a("./builds"),i=a("./releases"),j=a("./organizations"),k=function(a){this.defaults={},this.options=d(a,this.defaults);var b={host:c.env.DIVSHOT_API_URL||a.host||"https://api.divshot.com",headers:{}};a.token&&(b.headers={authorization:"Bearer "+a.token}),this._api=new e(b),this.user=f(this._api,this,a),this.apps=g(this._api,this),this.builds=h(this._api,this),this.releases=i(this._api,this),this.organizations=j(this._api,this)};k.createClient=function(a){return new k(a)},k.prototype.setTokenHeader=function(a,b){var b=b||this._api;b.options.headers.authorization="Bearer "+a},k.prototype.setToken=function(a){this.options.token=a,this._api.headers.authorization="Bearer "+a},b.exports=k},{"./apps":2,"./builds":4,"./helpers/defaults":5,"./organizations":6,"./releases":7,"./user":8,__browserify_process:10,narrator:17}],2:[function(a,b){b.exports=function(b,c){var d=(a("./user")(b),b.endpoint("apps",{hooks:{pre:function(a){this.getEndpoint("users").authenticate(function(b,e){c.setTokenHeader(e,d),a()})}},_buildsFor:function(a){return a.endpoint("builds",{id:function(b){return this.one(b,{finalize:function(a){return this.http.request(this.url()+"/finalize","PUT",function(b,c){a&&a(null,c)})},release:function(b,c){return this.http.request(a.url()+"/releases/"+b,"POST",{form:{build:this.options.id}},function(a,b){c&&c(a,b)})}})}})},_releasesFor:function(a){return a.endpoint("releases",{env:function(a){return this.one(a,{rollback:function(a){return this.http.request(this.url()+"/rollback","POST",function(b,c){a&&a(b,c)})},promote:function(a,b){return this.http.request(this.url(),"POST",{form:{environment:a}},function(a,c,d){b&&b(a,d)})}})}})},id:function(a){var b=this.one(a);return b.builds=this._buildsFor(b),b.releases=this._releasesFor(b),b.domains=b.endpoint("domains",{_domainRequest:function(a,b,c){return this.http.request(this.url()+"/"+a,b,function(a,b){c&&c(a,b)})},add:function(a,b){return this._domainRequest(a,"PUT",b)},remove:function(a,b){return this._domainRequest(a,"DELETE",b)}}),b.env=function(a){return b.endpoint("env").one(a,{config:function(a,b){var c=this.url()+"/config";return this.http.request(c,"PUT",{form:{config:a}},function(a,c){b(a,c)})}})},b},organization:function(a,b){var c=this.options.host+"/organizations/"+a+"/apps";return this.http.request(c,"GET",b)},create:function(a,b){return this.http.request(this.url(),"POST",{form:{name:a}},b)}}));return d}},{"./user":8}],3:[function(a){angular.module("divshot",[]).provider("divshot",function(){var b=a("../Divshot"),c=a("narrator").Http,d=a("narrator/lib/browser/asQ"),e=a("narrator/lib/browser/asHttp");return{_options:{},configure:function(a){this._options=a},$get:function(a,f,g){return a.narratorApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},d(c,a,f),e(c,g),b.createClient(this._options)}}})},{"../Divshot":1,narrator:17,"narrator/lib/browser/asHttp":11,"narrator/lib/browser/asQ":12}],4:[function(a,b){b.exports=function(b,c){var d=(a("./user")(b),b.endpoint("builds",{hooks:{pre:function(a){this.getEndpoint("users").authenticate(function(b,e){c.setTokenHeader(e,d),a()})}},lookup:function(a,b){var c=this.url()+"/lookup";return this.http.request(c,"GET",{form:{host:a}},function(a,c,d){b&&b(a,d)})}}));return d}},{"./user":8}],5:[function(a,b){b.exports=function(a,b){return a=a||{},Object.keys(b).forEach(function(c){"undefined"==typeof a[c]&&(a[c]=b[c])}),a}},{}],6:[function(a,b){b.exports=function(b,c){var d=(a("./user")(b),b.endpoint("organizations",{hooks:{pre:function(a){this.getEndpoint("users").authenticate(function(b,e){c.setTokenHeader(e,d),a()})}},id:function(a){var b=this.one(a);return b.apps=b.endpoint("apps"),b.members=b.endpoint("members",{id:function(a){return this.one(a)}}),b}}));return d}},{"./user":8}],7:[function(a,b){b.exports=function(b){var c=(a("./user")(b),b.endpoint("releases",{lookup:function(a,b){var c=this.url()+"/lookup?host="+a;return this.http.request(c,"GET",b)}}));return c}},{"./user":8}],8:[function(a,b){b.exports=function(a,b,c){var d=a.endpoint("self/emails",{add:function(a,b){return this.http.request(this.url(),"POST",{form:{address:a}},b)},primary:function(a,b){return this.http.request(this.url(),"POST",{form:{address:a,primary:!0}},b)},remove:function(a,b){return d.one(a).remove(b)},resend:function(a,b){var a=d.one(a),c=a.url()+"/resend";return this.http.request(c,"POST",b)}}),e=a.endpoint("self").one("password"),f=a.endpoint("users",{credentials:c,emails:d,password:e,id:function(a){return f.one(a)},authenticate:function(a){var b=this;return this.credentials.token?a(null,this.credentials.token):this.http._http(this.options.host+"/token","POST",{form:{username:this.credentials.email,password:this.credentials.password,grant_type:"password"},headers:{Authorization:"Basic NTI1NTc4YTM0MjFhYTk4MTU1MDAwMDA0Og=="}},function(c,d,e){return a&&c||e.status?(c=c||e.error,a(c)):(a&&(b.credentials.token=e.access_token,a(c,b.credentials.token)),void 0)})},setCredentials:function(a){this.credentials||(this.credentials={}),this.credentials.email=a.email,this.credentials.password=a.password,this.credentials.token=a.token},self:function(a){return this.http.request(this.options.host+"/self","GET",a)}});return f}},{}],9:[function(){},{}],10:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){if(a.source===window&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var b=c.shift();b()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],11:[function(a,b){b.exports=function(a,b){a.prototype._request=function(a,c){a.data=a.data||a.form,b(a).success(function(a){var b=a.self||a;c(null,b,b)}).error(function(a){c(a)})}}},{}],12:[function(a,b){b.exports=function(a,b,c){a.prototype._promiseWrap=function(a){var d=c.defer();return a(function(a){b.narratorApply(function(){d.resolve(a)})},function(a){b.narratorApply(function(){d.reject(a)})}),d.promise}}},{}],13:[function(a,b){var c=a("./helpers/defaults"),d=a("extend"),e=a("url-join"),f=a("./http"),g=b.exports=function(a){this.hooks={pre:function(a){a()}},this.options={host:"",path:"",headers:{},_endpoints:{}},a||(a={}),a.userDefined||(a.userDefined={}),c(a.userDefined.hooks,this.hooks),d(this.options,a),d(this,a.userDefined),this.http=new f({context:this,headers:this.options.headers,hooks:this.hooks})},h=a("./entity");g.prototype.url=function(){return e(this.options.host,this.options.path)},g.prototype.one=function(a,b){var c=new h({_endpoints:this.options._endpoints,host:this.options.host,path:e("/",this.options.path),headers:this.options.headers,userDefined:b||{},id:a,api:this.options.api});return c},g.prototype.list=function(a){return this.http.request(this.url(),"GET",function(b,c,d){a&&a(b,d)})},g.prototype.create=function(a,b){var c={form:a};return this.http.request(this.url(),"POST",c,function(a,c,d){b&&b(a,d)})},g.prototype.getEndpoint=function(a,b){var c=b?a+b:a;return this.options._endpoints[c]}},{"./entity":14,"./helpers/defaults":15,"./http":16,extend:18,"url-join":19}],14:[function(a,b){var c=a("./http"),d=a("url-join"),e=a("./helpers/defaults"),f=a("extend"),g=b.exports=function(a){this.hooks={pre:function(a){a()}},this.options={host:"",path:"",headers:{},id:0,_endpoints:{}},a||(a={}),a.userDefined||(a.userDefined={}),e(a.userDefined.hooks,this.hooks),f(this.options,a),f(this,a.userDefined),this.http=new c({context:this,headers:this.options.headers,hooks:this.hooks})},h=a("./narrator");g.prototype.endpoint=function(a,b){var c=new h({id:this.options.id,host:this.url(),headers:this.options.headers,_endpoints:this.options._endpoints});return c.endpoint(a,b)},g.prototype.url=function(){return d(this.options.host,this.options.path,this.options.id)},g.prototype.get=function(a){return this.http.request(this.url(),"GET",function(b,c,d){a&&a(b,d)})},g.prototype.update=function(a,b){var c={form:a};return this.http.request(this.url(),"PUT",c,function(a,c,d){b&&b(a,d)})},g.prototype.remove=function(a){return this.http.request(this.url(),"DELETE",function(b,c,d){a&&a(b,d)})},g.prototype.getEndpoint=function(a,b){var c=b?a+b:a;return this.options._endpoints[c]}},{"./helpers/defaults":15,"./http":16,"./narrator":17,extend:18,"url-join":19}],15:[function(a,b){b.exports=a(5)},{}],16:[function(a,b){var c=a("__browserify_process"),d=a("extend"),e=a("./helpers/defaults"),f=a("request"),g=a("promise"),h=b.exports=function(a){function b(a){return a.options.context.options&&a.options.context.options.api&&a.options.context.options.api.promise}this.options={headers:{},hooks:{},context:{}},d(this.options,a),this.promise=b(this)?this.options.context.options.api.promise:function(a){return new g(a)}};h.prototype.setHeaders=function(a){this.options.headers=a},h.prototype.setHeader=function(a,b){this.options.headers[a]=b},h.prototype.removeHeader=function(a){delete this.options.headers[a]},h.prototype._parseJSON=function(a){try{a=JSON.parse(a)}catch(b){}finally{return a}},h.prototype._promiseWrap=function(a){return new g(a)},h.prototype._request=f,h.prototype._http=function(a,b,c,d){var f=this;"function"==typeof c&&(d=c,c={}),"undefined"==typeof d&&(d=function(){});var g={url:a,method:b};return g=e(c,g),this._promiseWrap(function(a,b){f._request(g,function(c,e,g){var h=f._parseJSON(g);c?b(c):a(h),d(c,e,h)})})},h.prototype.request=function(a,b,e,f){var g=this;"function"==typeof e&&(f=e,e={});var h={},i={};return d(h,{headers:this.options.headers},e),d(i,h,{path:a,method:b}),this._promiseWrap(function(d,e){c.nextTick(function(){var c=g.options.hooks&&g.options.hooks.pre?g.options.hooks.pre:function(a){a()};c.call(g.options.context,function(){g._http(a,b,h,f).then(d,e)})})})}},{"./helpers/defaults":15,__browserify_process:10,extend:18,promise:9,request:9}],17:[function(a,b){var c=a("extend"),d=a("url-join"),e=(a("promise"),b.exports=function(a){a=a||{},this._endpoints={},this.host="/",c(this,a)});e.Http=a("./http");var f=a("./endpoint");e.prototype.endpoint=function(a,b){var c=this.id?a+this.id:a;if(!(c in this._endpoints)){var e=new f({host:this.host,path:d("/",a),headers:this.headers,userDefined:b||{},_endpoints:this._endpoints,api:this});this._endpoints[c]=e}return this._endpoints[c]}},{"./endpoint":13,"./http":16,extend:18,promise:9,"url-join":19}],18:[function(a,b){function c(a){if(!a||"[object Object]"!==e.call(a)||a.nodeType||a.setInterval)return!1;var b=d.call(a,"constructor"),c=d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var f;for(f in a);return void 0===f||d.call(a,f)}var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString;b.exports=function f(){var a,b,d,e,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"!=typeof i&&"function"!=typeof i&&(i={});k>j;j++)if(null!=(a=arguments[j]))for(b in a)d=i[b],e=a[b],i!==e&&(l&&e&&(c(e)||(g=Array.isArray(e)))?(g?(g=!1,h=d&&Array.isArray(d)?d:[]):h=d&&c(d)?d:{},i[b]=f(l,h,e)):void 0!==e&&(i[b]=e));return i}},{}],19:[function(a,b){function c(a){return a.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}b.exports=function(){var a=[].slice.call(arguments,0).join("/");return c(a)}},{}]},{},[3]);