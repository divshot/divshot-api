!function t(e,r,n){function o(i,u){if(!r[i]){if(!e[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e){e.exports=function(){var t=this.resource("apps");return t.id=function(t){var e=this.one(t);return e.domains=e.resource("domains",{add:function(t){return this.one(t).update()},remove:function(t){return this.one(t).del()}}),e.env=function(t){return e.resource("env").one(t,{configure:function(t){return this.one("config").update(t)}})},e.builds=e.resource("builds",{id:function(t){return this.one(t,{release:function(r){return e.resource("releases").resource(r).create({build:t})}})},finalize:function(t){return this.one(t).one("finalize").update()}}),e.releases=e.resource("releases",{env:function(t){return this.resource(t,{rollback:function(t){return t?this.resource("rollback").post({version:t}):this.resource("rollback").post()},promote:function(t){return this.post({environment:t})}})}}),e},t.organization=function(t){return this.api.get("/organizations/"+t+"/apps")},t}},{}],2:[function(t){"use strict";angular.module("divshot",[]).provider("divshot",function(){var e=t("../divshot"),r=t("./auth.js"),n=t("rapper/lib/browser/angular.request"),o=t("rapper/lib/browser/angular.promise");e.prototype.auth=r.auth,e.prototype.authWithCookie=r.authWithCookie;var s=new e;return{_host:{},api:s,configure:function(t){this._host=t},$get:["$q","$http",function(t,e){return s._request=n(e,t),s.promise=o(t),s}]}})},{"../divshot":5,"./auth.js":3,"rapper/lib/browser/angular.promise":18,"rapper/lib/browser/angular.request":19}],3:[function(t,e){var r=t("querystring"),n=function(){var t=this;return t.promise(function(e,r){t.post(t.host()+"/token","POST",{form:{username:t.username(),password:t.password(),grant_type:"password"},headers:{Authorization:"Basic "+btoa(t.clientId()+":")}},function(t,n,o){if(t)try{r(JSON.parse(t.responseText))}catch(s){r({error:"unknown_error",error_description:t.responseText})}else o.error?r(o):e(o)})})},o=function(t,e){e=e||function(){};var r=this;return r.promise(function(n,o){var s=r.auth_origin||"https://auth.divshot.com",i=null,u=function(t){if(t.origin===s){i&&window.clearInterval(i);var e=t.data;e.error?o(e):n(e),c&&c.close&&c.close()}return!0};window.addEventListener("message",u);var a=s+"/authorize?response_type=post_message&client_id="+r.clientId();t.provider&&(a+="&provider="+t.provider);var c=window.open(a,"divshotauth","centerscreen=yes,chrome=yes,width=480,height=640,status=yes,menubar=no,location=no,personalbar=no");i=window.setInterval(function(){try{(!c||null==c||c.closed)&&(window.clearInterval(i),e({error:"access_denied",error_description:"The user closed the authentication window before the process was completed."},null))}catch(t){}},500)})},s=function(){for(var t,e,r,s,i=this,u=0;u<arguments.length;u++)"object"==typeof arguments[u]?e=arguments[u]:"string"==typeof arguments[u]?r=arguments[u]:"function"==typeof arguments[u]&&(t=arguments[u]);return e=e||{},"password"===r&&e.email&&e.password?s=n.call(i,e):(e.provider=r,s=o.call(i,e)),s.then(function(r){t&&t(null,r),e.store&&(document.cookie="__dsat="+btoa(r.access_token)+";max-age="+604800..toString()),i.setToken(r.access_token)},function(e){t&&t(e)}),s},i=function(){var t=r.decode(document.cookie,"; "),e=this;if(t.__dsat){var n=atob(t.__dsat);return e.setToken(n),!0}return!1};e.exports={auth:s,authWithCookie:i}},{querystring:16}],4:[function(t,e){e.exports=function(){var t=this.resource("builds");return t}},{}],5:[function(t,e){(function(r){var n=t("rapper"),o=(new n(h),t("Base64").btoa),s=t("./user"),i=t("./apps"),u=t("./organizations"),a=t("./releases"),c=t("./builds"),p=t("./vouchers"),h="https://api.divshot.com",f="0.5.0",l=function(){n.call(this,h),this.apiVersion(r.env.DIVSHOT_API_URL||f),this.user=s.call(this),this.apps=i.call(this),this.organizations=u.call(this),this.releases=a.call(this),this.builds=c.call(this),this.vouchers=p.call(this)};l.prototype=Object.create(n.prototype),l.prototype.token=function(t){return t?(this._token=t,this.header("Authorization","Bearer "+t),this):this._token},l.prototype.apiVersion=function(t){return t?(this.header("Accepts-Version",t),this._apiVersion=t,this):this._apiVersion},l.prototype.basicAuthHeader=function(t){this.header("Authorization","Basic "+o(t.toString()))},l.prototype.session=function(t){return this._clientId=t,this.header("Authorization","Session "+t),this.xhr("withCredentials",!0),this},l.prototype.clientId=function(t){return t?(this._clientId=t.toString(),this):this._clientId},l.prototype.username=function(t){return t?(this._username=t,this):this._username},l.prototype.password=function(t){return t?(this._password=t,this):this._password},l.prototype.credentials=function(t,e){return t||e?(this.username(t),this.password(e),this):{username:this.username(),password:this.password()}},e.exports=l}).call(this,t("/Users/scott/www/divshot/divshot-api/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./apps":1,"./builds":4,"./organizations":6,"./releases":7,"./user":8,"./vouchers":9,"/Users/scott/www/divshot/divshot-api/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":12,Base64:10,rapper:17}],6:[function(t,e){e.exports=function(){return this.resource("organizations",{id:function(t){var e=this.one(t);return e.apps=e.resource("apps"),e.members=e.resource("members",{id:function(t){return this.one(t)}}),e}})}},{}],7:[function(t,e){e.exports=function(){var t=this.resource("releases",{lookup:function(t){return this.api.get(this.url()+"/lookup?host="+t)}});return t}},{}],8:[function(t,e){var r=t("Base64").btoa;e.exports=function(){var t=this.resource("users",{id:function(t){var e=this.one(t);return e.password={reset:function(){return e.api.post("/actions/reset_password/"+t)}},e.emails=e.api.resource("self").resource("emails",{add:function(t,e){var r={address:t};return e&&(r.primary=!0),this.post(r)},remove:function(t){return this.one(t).remove()},resend:function(t){return this.one(t).resource("resend").create()}}),e},tokenAuth:function(){if(this.api.token())return this.api.asPromise(this.api.token());if(this.api.clientId())return this.api.asPromise(void 0);var t=this.api.post("/token",{form:{username:this.api.username(),passowrd:this.api.password(),grant_type:"password"},headers:{Authorization:"Basic "+r(this.api._clientId+":")}});return this.api.promise(function(e,r){return t.then(function(t){e(t.access_token)},r)})},self:function(){return this.api.get("/self")},welcomed:function(){return this.api.put("/self/welcomed")},generateTicket:function(){return this.api.basicAuthHeader(this.api.clientId()),this.api.post("/token/tickets")},checkTicketStatus:function(t){return this.api.basicAuthHeader(this.api.clientId()),this.api.post("/token",{form:{grant_type:"ticket",ticket:t}})}});return t}},{Base64:10}],9:[function(t,e){e.exports=function(){return this.resource("vouchers",{redeem:function(t){return this.one(t).one("redeem").put()}})}},{}],10:[function(t,e,r){!function(){function t(t){this.message=t}var e="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,o,s=0,i=n,u="";e.charAt(0|s)||(i="=",s%1);u+=i.charAt(63&r>>8-s%1*8)){if(o=e.charCodeAt(s+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|o}return u}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,s=0,i=0,u="";o=e.charAt(i++);~o&&(r=s%4?64*r+o:o,s++%4)?u+=String.fromCharCode(255&r>>(-2*s&6)):0)o=n.indexOf(o);return u})}()},{}],11:[function(){},{}],12:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.once=r,n.off=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],13:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return o.exec(t).slice(1)};r.resolve=function(){for(var r="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:t.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(r=i+"/"+r,o="/"===i.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+r||"."},r.normalize=function(t){var o=r.isAbsolute(t),s="/"===i(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var o=n(t.split("/")),s=n(e.split("/")),i=Math.min(o.length,s.length),u=i,a=0;i>a;a++)if(o[a]!==s[a]){u=a;break}for(var c=[],a=u;a<o.length;a++)c.push("..");return c=c.concat(s.slice(u)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=s(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=s(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return s(t)[3]};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("/Users/scott/www/divshot/divshot-api/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/scott/www/divshot/divshot-api/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":12}],14:[function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,o,s){e=e||"&",o=o||"=";var i={};if("string"!=typeof t||0===t.length)return i;var u=/\+/g;t=t.split(e);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var p=0;c>p;++p){var h,f,l,d,m=t[p].replace(u,"%20"),v=m.indexOf(o);v>=0?(h=m.substr(0,v),f=m.substr(v+1)):(h=m,f=""),l=decodeURIComponent(h),d=decodeURIComponent(f),r(i,l)?n(i[l])?i[l].push(d):i[l]=[i[l],d]:i[l]=d}return i};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],15:[function(t,e){"use strict";function r(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,u){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(r){var s=encodeURIComponent(n(r))+i;return o(t[r])?t[r].map(function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[r]))}).join(e):u?encodeURIComponent(n(u))+i+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],16:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":14,"./encode":15}],17:[function(t,e){"use strict";var r=t("httpify"),n=t("promise"),o=t("extend"),s=t("./lib/resource"),i=t("slasher"),u=function(t){this.attributes={},this.headers={},this.xhrs={},this.resources={},t&&(this.attributes.host=t)};u.prototype._addResource=function(t){this.resources[t.url()]=t},u.prototype.host=function(t){return t?(this.attributes.host=t,this):this.attributes.host},u.prototype._buildUrl=function(t,e){return e?this.attributes.host+i(t):i(t)},u.prototype.header=function(t,e){return e?(this.headers[t]=e,this):this.headers[t]},u.prototype.xhr=function(t,e){return e?(this.xhrs[t]=e,this):this.xhrs[t]},u.prototype._http=function(t,e,r){var n=this,s=this.resources[t],i={url:this._buildUrl(t,!0),method:e,type:"json"};return o(i,{headers:this.headers},this.xhrs,r),s?this.promise(function(t,e){s.beforeQueue.drain(function(r){return r?e(r):void n._request(i).then(t,e)})}):this._request(i)},u.prototype._request=function(t){return this.promise(function(e,n){r(t,function(t,r,o){return t||r.statusCode>=300||r.status>=300?n(t||r):void e(JSON.parse(o))})})},u.httpMethods=["GET","POST","PUT","DELETE","PATCH"],u.httpMethods.forEach(function(t){u.prototype[t.toLowerCase()]=function(e,r,n){return this._http(e,t,r,n)}}),u.prototype.resource=function(t,e){return s._create(t,e,{api:this})},u.prototype.promise=function(t){return new n(t)},u.prototype.asPromise=function(t){return this.promise(function(e){e(t)})},e.exports=u},{"./lib/resource":20,extend:21,httpify:11,promise:11,slasher:30}],18:[function(t,e){e.exports=function(t){return function(e){var r=t.defer();return e(function(t){r.resolve(t)},function(t){r.reject(t)}),r.promise}}},{}],19:[function(t,e){e.exports=function(t,e){return function(r){var n=e.defer();return r.form&&(r.data=r.form),r.type&&(r.responseType=r.type),t(r).success(function(t){n.resolve(t)}).error(function(t){n.reject(t)}),n.promise}}},{}],20:[function(t,e){"use strict";var r=t("extend"),n=t("slasher"),o=t("path"),s=t("qmap"),i=function(t,e){this.xhrs={},this.beforeQueue=new s(this),r(this,t,e)};i.prototype.url=function(t){return this.api._buildUrl(this.name,t)},i.prototype.one=function(t,e){return i._create(t,e,{type:"one",api:this.api,baseUrl:this.url()})},i.prototype.resource=function(t,e){return i._create(t,e,{type:"many",api:this.api,baseUrl:this.url()})},i.prototype.xhr=function(t,e){return e?(this.xhrs[t]=e,this):this.xhrs[t]},i.prototype.before=function(){this.beforeQueue.push(arguments)},i.many={get:function(){return this.api.get(this.url(),this.xhrs)},post:function(t){return this.api.post(this.url(),r(this.xhrs,{form:t}))},list:function(){return this.get()},create:function(t){return this.post(t)}},i.one={get:i.many.get,put:function(t){return this.api.put(this.url(),r(this.xhrs,{form:t}))},del:function(){return this.api.delete(this.url(),this.xhrs)},update:function(t){return this.put(t)},remove:function(){return this.del()}},i._create=function(t,e,s){var u={},a=o.join(s.baseUrl||"/",n(t)),c=s.api;if(r(u,i[s.type||"many"],e),c.resources[a])return c.resources[a];var p=new i({name:a,api:c},u);return c.resources[p.url()]=p,p},e.exports=i},{extend:21,path:13,qmap:22,slasher:30}],21:[function(t,e){function r(t){if(!t||"[object Object]"!==o.call(t)||t.nodeType||t.setInterval)return!1;var e=n.call(t,"constructor"),r=n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var s;for(s in t);return void 0===s||n.call(t,s)}var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString;e.exports=function s(){var t,e,n,o,i,u,a=arguments[0]||{},c=1,p=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},c=2),"object"!=typeof a&&"function"!=typeof a&&(a={});p>c;c++)if(null!=(t=arguments[c]))for(e in t)n=a[e],o=t[e],a!==o&&(h&&o&&(r(o)||(i=Array.isArray(o)))?(i?(i=!1,u=n&&Array.isArray(n)?n:[]):u=n&&r(n)?n:{},a[e]=s(h,u,o)):void 0!==o&&(a[e]=o));return a}},{}],22:[function(t,e){var r=t("flat-arguments"),n=(t("as-array"),t("drainer")),o=(t("lodash.isarguments"),function(t){this._items=[],this._methods={},this._context=t});o.prototype.method=function(t,e){this._methods[t]=e},o.prototype.push=function(){function t(t){this._items.push(t)}function e(t){return"string"==typeof t?this._methods[t]:t}function n(t){return this._context?t.bind(this._context):t}r(arguments).map(e,this).map(n,this).forEach(t,this)},o.prototype.drain=function(){var t=n(this._items),e=[].slice.call(arguments,0),r=e.pop();e.push(function(t){r?r(t):function(){}}),t.apply(t,e)},e.exports=o},{"as-array":23,drainer:24,"flat-arguments":25,"lodash.isarguments":29}],23:[function(t,e){var r=t("lodash.isarguments");e.exports=function(t){return t||(t=[]),r(t)&&(t=[].splice.call(t,0)),Array.isArray(t)?t:[t]}},{"lodash.isarguments":29}],24:[function(t,e){var r=t("as-array"),n=function(t){return function(){var e=r(arguments),n=e.pop();o(t,[],n,e)}},o=function(t,e,r,n){var s=t.shift();return e=e?n.concat(e):n,s?(e.push(function(){var e=[].slice.call(arguments),s=e.shift();return s?r(s):void o(t,e,r,n)}),void s.apply(s,e)):r.apply(r,[null].concat(e))};e.exports=n},{"as-array":23}],25:[function(t,e){function r(t){return n(t).map(function(t){return s(t)?(i(t)&&(t=r(t)),n(t)):t})}var n=t("as-array"),o=t("flatten"),s=t("lodash.isarguments"),i=t("lodash.isobject"),u=function(){return o(r(arguments))};e.exports=u},{"as-array":23,flatten:26,"lodash.isarguments":29,"lodash.isobject":27}],26:[function(t,e){e.exports=function(t,e){function r(t,n){return t.reduce(function(t,o){return t.concat(Array.isArray(o)&&e>n?r(o,n+1):o)},[])}return e="number"==typeof e?e:1/0,r(t,1)}},{}],27:[function(t,e){function r(t){return!(!t||!n[typeof t])}var n=t("lodash._objecttypes");e.exports=r},{"lodash._objecttypes":28}],28:[function(t,e){var r={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=r},{}],29:[function(t,e){function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&s.call(t)==n||!1}var n="[object Arguments]",o=Object.prototype,s=o.toString;e.exports=r},{}],30:[function(t,e){function r(t){return i(s("/",t))}function n(t,e){var n={},o=Object.keys(t),s=o.length,i=0;for(i;s>i;i+=1){var u=o[i],a=e.key===!1?u:r(u),c=t[u];n[a]=e.value===!1?c:r(c)}return n}var o=t("path"),s=o.join,i=o.normalize,u=e.exports=function(t){return options=arguments[1]||{},"string"==typeof t?r(t):"number"==typeof t?r(t+""):"object"==typeof t?n(t,options):t};e.exports=u},{path:13}]},{},[2]);